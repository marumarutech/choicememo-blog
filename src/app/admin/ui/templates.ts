import { CATEGORIES, type CategoryKey } from '@config/categories'

type CategoryTemplate = {
  title: string
  description: string
  outline: string[]
  body: string
}

const lead = (headline: string) => '<Lead>' + headline + '</Lead>'

export const CATEGORY_TEMPLATES: Record<CategoryKey, CategoryTemplate> = {
  invest: {
    title: '投資・マーケット週次レビュー',
    description: '株式市場の振り返りと次のアクションを整理するフォーマット。日次メモを統合して使います。',
    outline: ['市況スナップ', '注目トピック', '売買ログ', '来週の戦略'],
    body: [
      lead('今週のマーケットで押さえておきたい指標と、自分のポジション管理をまとめます。'),
      '## 市況スナップ',
      '- S&P500: 前週比 **+1.2%**（終値 5,030）',
      '- 日経平均: **40,031円（+2.3%）** で史上最高値を更新',
      '- ドル円: 149円台に復帰。米長期金利は 4.2% 前後',
      '',
      '## 注目トピック',
      '### 企業決算',
      '- Nvidia がサプライズ決算。データセンター需要の加速を確認\n- 国内では三菱UFJが自社株買いを発表',
      '',
      '### マクロ指標',
      '- 米CPI: コア前年比 **+3.8%**（予想+3.7%）\n- 日本GDP改定値は前期比年率 **-0.4%** で下方修正',
      '',
      '## ポジション & 売買ログ',
      '<ComparisonTable\n  columns={["銘柄", "保有比率", "アクション", "メモ"]}\n  rows={[\n    { "銘柄": "VOO", "保有比率": "45%", "アクション": "買い増し", "メモ": "押し目拾い" },\n    { "銘柄": "1545", "保有比率": "15%", "アクション": "ホールド", "メモ": "金価格の安定推移" }\n  ]}\n/>',
      '',
      '## 来週の作戦メモ',
      '- 40,000円台の短期加熱感に注意しつつTOPIX連動ETFを段階的に調整\n- 米国は個別株ではなく指数積立でリスクを抑える',
    ].join('\n'),
  },
  fitness: {
    title: '筋トレ・ダイエット週報',
    description: 'トレーニングメニューと栄養・リカバリーをワンペインで振り返れる構成。',
    outline: ['一週間の所感', 'メニュー記録', '栄養と体調', '次回アクション'],
    body: [
      lead('今週のコンディションと負荷調整のポイントを整理。来週の改善に直結させる。'),
      '## メイントピック',
      '- 睡眠時間が平均 **6.1時間** と不足気味\n- デッドリフトのフォーム修正で腰の違和感が解消',
      '',
      '## トレーニングログ',
      '<ComparisonTable\n  columns={["日付", "部位", "メイン種目", "負荷", "メモ"]}\n  rows={[\n    { "日付": "Mon", "部位": "胸/背中", "メイン種目": "ベンチプレス", "負荷": "80kg ×5×5", "メモ": "+2.5kg" },\n    { "日付": "Wed", "部位": "脚", "メイン種目": "スクワット", "負荷": "110kg ×5×5", "メモ": "バー位置を微調整" },\n    { "日付": "Fri", "部位": "肩/腕", "メイン種目": "ショルダープレス", "負荷": "32kg ×8×4", "メモ": "RPE 8" }\n  ]}\n/>',
      '',
      '## 栄養とリカバリー',
      '- 1日の平均摂取カロリー: **2,450kcal** / P:190g C:260g F:70g\n- サプリ: ホエイ、クレアチン、マルチビタミン\n- 体重推移: 73.2kg → 73.0kg（-0.2kg）',
      '',
      '## 次週のアクション',
      '- ベンチプレス 82.5kg に挑戦\n- 平日 23:30 就寝を徹底し睡眠時間を確保\n- カーボアップデイを金曜夜に設定',
      '',
      '<CTAButtons links={[{ label: "マイプロテイン", href: "https://" }, { label: "Amazon 楽天市場", href: "https://" }]} />',
    ].join('\n'),
  },
  gadgets: {
    title: 'ガジェット・家電レビュー',
    description: '開封〜使用感〜比較までを網羅したレビュー構成。購入判断の材料を明確化。',
    outline: ['概要', '使って分かったこと', 'Pros/Cons', '買うべき人'],
    body: [
      lead('新しいガジェットを「使う前」と「使った後」でどう評価が変わったのかを丁寧に記録。'),
      '## 製品概要',
      '- モデル: ___\n- 価格: ___\n- 購入時期: ___',
      '',
      '## セットアップと使用シーン',
      '- 初期設定にかかった時間や気付き\n- 実際に使う場面とワークフロー',
      '',
      '## 良かったところ / 気になったところ',
      '<ProsCons\n  pros={["携帯製の高さでワークフローが最適化", "バッテリーが公称より1時間長く持った"]}\n  cons={["ソフトケースが付属しない", "USB-C ケーブルが短い"]}\n/>',
      '',
      '## 競合機種との比較',
      '<ComparisonTable\n  columns={["製品", "価格", "バッテリー", "重量", "コメント"]}\n  rows={[\n    { "製品": "モデルA", "価格": "32,800円", "バッテリー": "12h", "重量": "890g", "コメント": "動画編集向け" },\n    { "製品": "モデルB", "価格": "27,500円", "バッテリー": "10h", "重量": "760g", "コメント": "コスパ重視" }\n  ]}\n/>',
      '',
      '## 結論',
      '- こんな人に合う / 合わない\n- 購入タイミングの目安やキャンペーン情報',
      '',
      '<CTAButtons links={[{ label: "公式ストア", href: "https://" }, { label: "Amazon", href: "https://" }]} />',
    ].join('\n'),
  },
  deals: {
    title: 'セール・お得情報速報',
    description: '開催概要と注目アイテム、購入時の注意点を素早く整理する雛形。',
    outline: ['開催概要', '注目アイテム', '買い方ヒント'],
    body: [
      lead('セール開始から終了までに押さえたい最新情報と、買うべきアイテムを即確認できるようにまとめます。'),
      '## セール概要',
      '- イベント名: ___\n- 期間: ___\n- 条件: ___（例: エントリー + アプリ購入でポイント最大◯倍）',
      '',
      '## 速報アップデート',
      '- 0:00〜 タイムセール第一弾\n- 12:00〜 追加クーポン配布',
      '',
      '## 目玉アイテム',
      '<ComparisonTable\n  columns={["カテゴリ", "商品名", "価格", "ポイント", "購入リンク"]}\n  rows={[\n    { "カテゴリ": "プロテイン", "商品名": "マイプロ ノンフレーバー 5kg", "価格": "8,480円", "ポイント": "20%", "購入リンク": "[Amazon](https://)" },\n    { "カテゴリ": "ガジェット", "商品名": "Anker 充電器", "価格": "3,280円", "ポイント": "15%", "購入リンク": "[楽天](https://)" }\n  ]}\n/>',
      '',
      '## 買い物メモ',
      '- 価格改定が入り次第ここに追記\n- 在庫復活待ちアイテムのトラッキング',
      '',
      '<CTAButtons links={[{ label: "セール会場へ", href: "https://" }, { label: "条件エントリー", href: "https://" }]} />',
    ].join('\n'),
  },
  topics: {
    title: 'ニュース・トピック速記',
    description: '気になる話題を「背景 → 何が起きたか → 次どうするか」でテンポ良く整理。',
    outline: ['トピック', '背景', '所感', 'アクション'],
    body: [
      lead('気になったトピックを短時間でアウトプットし、関連リンクをセットで残します。'),
      '## トピックまとめ',
      '- タイトル: ___\n- 何が起きたか: ___',
      '',
      '## 背景とインパクト',
      '- なぜ注目したのか\n- 自分やチームにどう影響しそうか',
      '',
      '## 所感とメモ',
      '- ここに感想や対策メモを書く\n- コメント欄用の一言サマリ',
      '',
      '## 次のアクション',
      '- 今日やること\n- 共有したいリンク',
      '',
      '### 関連リンク',
      '- [参考リンク1](https://)\n- [参考リンク2](https://)',
    ].join('\n'),
  },
}

export const getTemplateForCategory = (category: CategoryKey) => CATEGORY_TEMPLATES[category]

export const categoryTemplateOptions = (Object.keys(CATEGORY_TEMPLATES) as CategoryKey[]).map((key) => ({
  key,
  label: CATEGORIES[key].label,
  title: CATEGORY_TEMPLATES[key].title,
}))
